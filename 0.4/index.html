
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BookOps-Worldcat library">
      
      
      
        <link rel="canonical" href="https://bookops-cat.github.io/bookops-worldcat/0.4/">
      
      
      
        <link rel="next" href="about/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>Overview - BookOps-Worldcat Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="NYPL" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bookops-worldcat" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="BookOps-Worldcat Documentation" class="md-header__button md-logo" aria-label="BookOps-Worldcat Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BookOps-Worldcat Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BookOps-CAT/bookops-worldcat" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bookops-worldcat
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="." class="md-tabs__link">
          
  
  BookOps-WorldCat

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="api/authorize/" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="tutorials/" class="md-tabs__link">
        
  
    
  
  Tutorials

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="BookOps-Worldcat Documentation" class="md-nav__button md-logo" aria-label="BookOps-Worldcat Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    BookOps-Worldcat Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BookOps-CAT/bookops-worldcat" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bookops-worldcat
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    BookOps-WorldCat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            BookOps-WorldCat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Access Token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-brief-bibliographic-records-using-metadata-api" class="md-nav__link">
    <span class="md-ellipsis">
      Searching Brief Bibliographic Records Using Metadata API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-full-bibliographic-records" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving Full Bibliographic Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worldcataccesstoken" class="md-nav__link">
    <span class="md-ellipsis">
      WorldcatAccessToken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadatasession" class="md-nav__link">
    <span class="md-ellipsis">
      MetadataSession
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetadataSession">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Search Functionality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-full-bibliographic-records" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Full Bibliographic Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-current-oclc-number" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving Current OCLC Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About BookOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    bookops_worldcat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            bookops_worldcat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/authorize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.authorize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/metadata_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.metadata_api
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Access Token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-brief-bibliographic-records-using-metadata-api" class="md-nav__link">
    <span class="md-ellipsis">
      Searching Brief Bibliographic Records Using Metadata API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-full-bibliographic-records" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving Full Bibliographic Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worldcataccesstoken" class="md-nav__link">
    <span class="md-ellipsis">
      WorldcatAccessToken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadatasession" class="md-nav__link">
    <span class="md-ellipsis">
      MetadataSession
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetadataSession">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Search Functionality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-full-bibliographic-records" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Full Bibliographic Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-current-oclc-number" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving Current OCLC Number
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="bookops-worldcat">BookOps-Worldcat</h1>
<p><a href="https://github.com/BookOps-CAT/bookops-worldcat/actions"><img alt="Build Status" src="https://github.com/BookOps-CAT/bookops-marc/actions/workflows/unit-tests.yaml/badge.svg?branch=main" /></a> <a href="https://coveralls.io/github/BookOps-CAT/bookops-worldcat?branch=master"><img alt="Coverage Status" src="https://coveralls.io/repos/github/BookOps-CAT/bookops-worldcat/badge.svg?branch=master&amp;service=github" /></a> <a href="https://badge.fury.io/py/bookops-worldcat"><img alt="PyPI version" src="https://badge.fury.io/py/bookops-worldcat.svg" /></a> <img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/bookops-worldcat" /> <a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a> <a href="https://opensource.org/licenses/MIT"><img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg" /></a></p>
<h2 id="overview">Overview</h2>
<p>Requires Python 3.7 and up.</p>
<p>Bookops-Worldcat is a Python wrapper around <a href="https://www.oclc.org/en/home.html">OCLC's</a> <a href="https://www.worldcat.org/">Worldcat</a> <a href="https://www.oclc.org/developer/develop/web-services/worldcat-metadata-api.en.html">Metadata</a> API which supports changes released in the version 1.1 (May 2020) of the web service. The package features methods that utilize <a href="https://developer.api.oclc.org/wc-metadata-v1-1">search functionality</a> of the API as well as <a href="https://developer.api.oclc.org/wc-metadata">read-write endpoints</a>.</p>
<p>The Bookops-Worldcat package simplifies some of the OCLC API boilerplate, and ideally lowers the technological threshold for cataloging departments that may not have sufficient programming support to access and utilize those web services. Python language, with its gentle learning curve, has the potential to be a perfect vehicle towards this goal.</p>
<p>This package takes advantage of the functionality of the popular <a href="https://requests.readthedocs.io/en/master/">Requests library</a>. Interaction with OCLC's services is built around Requests sessions. <code>MetadataSession</code> inherits all <code>requests.Session</code> properties. Returned server responses are <code>requests.Response</code> objects with <a href="https://requests.readthedocs.io/en/master/user/quickstart/#response-content">all of their properties and methods</a>.</p>
<p>Authorizing a session simply requires passing an access token into <code>MetadataSession</code>. Opening a session allows the user to call specific methods which facilitate communication between the user's script/client and a particular endpoint of OCLC's service. Many of the hurdles related to making valid requests are hidden under the hood of this package, making it as simple as possible to access the functionalities of OCLC APIs.
Please note, not all features of the Metadata API are implemented because this tool was primarily built for our organization's specific needs. However, we are open to any collaboration to expand and improve the package.</p>
<p><strong>Supported OCLC web services:</strong></p>
<p>At the moment, the wrapper supports only <a href="https://www.oclc.org/developer/develop/authentication/oauth.en.html">OAuth 2.0 endpoints and flows</a>. The specific protocols are <a href="https://www.oclc.org/developer/develop/authentication/oauth/client-credentials-grant.en.html">Client Credential Grant</a> and <a href="https://www.oclc.org/developer/develop/authentication/access-tokens.en.html">Access Token</a> for authorization.</p>
<p><a href="https://www.oclc.org/developer/develop/web-services/worldcat-metadata-api.en.html">Worldcat Metadata API</a> is a read-write service for WorldCat. It allows adding and updating records in WorldCat, maintaining holdings, and working with local bibliographic data. Access to Metadata API requires OCLC credentials. The BookOps wrapper focuses on the following API operations:</p>
<ul>
<li>Search functionality<ul>
<li>Find member shared print holdings (<code>/bibs-retained-holdings</code>)</li>
<li>Get summary of holdings for known items (<code>/bibs-summary-holdings</code>)</li>
<li>Brief bibliographic resources:<ul>
<li>Search brief bibliographic resources (<code>/brief-bibs</code>)</li>
<li>Retrieve specific brief bibliographic resource (<code>/brief-bibs/{oclcNumber}</code>)</li>
<li>Retrieve other editions related to a particular bibliographic resource (<code>/brief-bibs/{oclcNumber}/other-editions</code>)</li>
</ul>
</li>
</ul>
</li>
<li>Full bibliographic resources<ul>
<li>Retrieve full bibliographic record (<code>/bib-data</code>)</li>
<li>Get current OCLC number (<code>/bib/checkcontrolnumber</code>)</li>
</ul>
</li>
<li>Holdings<ul>
<li>Set and unset institution holding  (<code>/ih/data</code>)</li>
<li>Retrieve status of institution holdings (<code>/ih/checkholdings</code>)</li>
<li>Set and unset institution holdings for a batch or records (<code>/ih/datalist</code>)</li>
</ul>
</li>
</ul>
<h2 id="installation">Installation</h2>
<p>To install use pip:</p>
<p><code>$ pip install bookops-worldcat</code></p>
<h2 id="quickstart">Quickstart</h2>
<p>Worldcat Metadata API requires OCLC credentials which can be obtained at the <a href="https://www.oclc.org/developer/home.en.html">OCLC Developer Network</a> site.</p>
<h4 id="obtaining-access-token">Obtaining Access Token</h4>
<p>The Worldcat access token can be obtained by passing credential parameters into the <code>WorldcatAccessToken</code> object.</p>
<div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">WorldcatAccessToken</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="o">=</span><span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
    <span class="n">principlal_idns</span><span class="o">=</span><span class="s2">&quot;my_principal_idns&quot;</span>
<span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">token_str</span><span class="p">)</span>
<span class="s2">&quot;tk_Yebz4BpEp9dAsghA7KpWx6dYD1OZKWBlHjqW&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">is_expired</span><span class="p">())</span>
<span class="kc">False</span>
</code></pre></div>
<p>Created <code>token</code> object can be directly passed into <code>MetadataSession</code> to authorize requests to the Metadata API web service:</p>
<div class="language-Python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">MetadataSession</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">session</span> <span class="o">=</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
</code></pre></div>
<h4 id="searching-brief-bibliographic-records-using-metadata-api">Searching Brief Bibliographic Records Using Metadata API</h4>
<p>The <code>MetadataSession</code> is authenticated using the <code>WorldcatAccessToken</code> object. The session allows searching brief records as well as retrieving full bibs in the MARC XML format.</p>
<p>Basic usage:
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">MetadataSession</span>

<span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">search_brief_bibs</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s2">&quot;ti:zendegi AND au:greg egan&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div></p>
<p>Returned brief bibliographic records are in the JSON format that can be parsed via <code>.json()</code> method.</p>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;numberOfRecords&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;briefRecords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;oclcNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;430840771&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Zendegi&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Greg Egan&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2010&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eng&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;generalFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Book&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;specificFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PrintBook&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;edition&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;First edition.&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;publisher&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Night Shade Books&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;mergedOclcNumbers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;664026825&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;catalogingInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;catalogingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BTCTA&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;transcribingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DLC&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;oclcNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;961162511&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Zendegi&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Greg Egan&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2013&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eng&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;generalFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AudioBook&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;specificFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CD&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;publisher&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Audible Studios on Brilliance Audio&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;mergedOclcNumbers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;947806980&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;catalogingInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;catalogingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AU@&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;transcribingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AU@&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="retrieving-full-bibliographic-records">Retrieving Full Bibliographic Records</h4>
<p>To retrieve a full bibliographic record from WorldCat use the <code>.get_full_bib</code> method. The server returns records in MARC XML format by default.</p>
<p><div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">MetadataSession</span>

<span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_full_bib</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="mi">430840771</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;entry</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;content</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;response</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://worldcat.org/rb&quot;</span><span class="w"> </span><span class="na">mimeType=</span><span class="s">&quot;application/vnd.oclc.marc21+xml&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;record</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/MARC21/slim&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;leader&gt;</span>00000cam<span class="w"> </span>a2200000<span class="w"> </span>i<span class="w"> </span>4500<span class="nt">&lt;/leader&gt;</span>
<span class="w">        </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;001&quot;</span><span class="nt">&gt;</span>on1143317889<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">        </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;003&quot;</span><span class="nt">&gt;</span>OCoLC<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">        </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;005&quot;</span><span class="nt">&gt;</span>20200328101446.1<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">        </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;008&quot;</span><span class="nt">&gt;</span>200305t20202019nyuabf<span class="w">   </span>b<span class="w">    </span>001<span class="w"> </span>0<span class="w"> </span>eng<span class="w"> </span>c<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;010&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot; &quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span><span class="w">  </span>2018957420<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;040&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot; &quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>NYP<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;b&quot;</span><span class="nt">&gt;</span>eng<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;e&quot;</span><span class="nt">&gt;</span>rda<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;c&quot;</span><span class="nt">&gt;</span>NYP<span class="nt">&lt;/subfield&gt;</span>
<span class="cm">&lt;!--...--&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;020&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot; &quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>9780316230049<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;q&quot;</span><span class="nt">&gt;</span>(pbk.)<span class="nt">&lt;/subfield&gt;</span>
<span class="cm">&lt;!--...--&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot; &quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>Christakis,<span class="w"> </span>Nicholas<span class="w"> </span>A.,<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;e&quot;</span><span class="nt">&gt;</span>author.<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;245&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>Blueprint<span class="w"> </span>:<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;b&quot;</span><span class="nt">&gt;</span>the<span class="w"> </span>evolutionary<span class="w"> </span>origins<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>good<span class="w"> </span>society<span class="w"> </span>/<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;c&quot;</span><span class="nt">&gt;</span>Nicholas<span class="w"> </span>A.<span class="w"> </span>Christakis.<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;250&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot; &quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>First<span class="w"> </span>Little,<span class="w"> </span>Brown<span class="w"> </span>Spark<span class="w"> </span>trade<span class="w"> </span>paperback<span class="w"> </span>edition.<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="w">        </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;264&quot;</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>New<span class="w"> </span>York,<span class="w"> </span>NY<span class="w"> </span>:<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;b&quot;</span><span class="nt">&gt;</span>Little,<span class="w"> </span>Brown<span class="w"> </span>Spark,<span class="nt">&lt;/subfield&gt;</span>
<span class="w">          </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;c&quot;</span><span class="nt">&gt;</span>2020<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="cm">&lt;!--...--&gt;</span>
<span class="w">  </span><span class="nt">&lt;/record&gt;</span>
<span class="w">    </span><span class="nt">&lt;/response&gt;</span>
<span class="w">  </span><span class="nt">&lt;/content&gt;</span>
<span class="w">  </span><span class="nt">&lt;id&gt;</span>http://worldcat.org/oclc/1143317889<span class="nt">&lt;/id&gt;</span>
<span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;http://worldcat.org/oclc/1143317889&quot;</span><span class="nt">&gt;&lt;/link&gt;</span>
<span class="nt">&lt;/entry&gt;</span>
</code></pre></div></p>
<h4 id="updating-holdings">Updating Holdings</h4>
<p><code>MetadataSession</code> can be used to check or set/unset your library holdings on a master record in Worldcat:</p>
<p>example:
<div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holding_set</span><span class="p">(</span><span class="n">oclc_number</span><span class="o">=</span><span class="s2">&quot;850939579&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">Response</span> <span class="p">[</span><span class="mi">201</span><span class="p">]</span><span class="o">&gt;</span>
</code></pre></div></p>
<p><div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holding_get_status</span><span class="p">(</span><span class="s2">&quot;850939579&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;requestedOclcNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;currentOclcNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;institution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NYP&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;holdingCurrentlySet&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://worldcat.org/oclc/850939579&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;updated&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2020-10-01T04:10:13.017Z&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>For holdings operations on batches of records see <a href="https://bookops-cat.github.io/bookops-worldcat/#holdings">Advanced Usage&gt;MetadataSession&gt;Updating Holdings</a></p>
<h2 id="advanced-usage">Advanced Usage</h2>
<p><strong>Identifying your application</strong></p>
<p>BookOps-Worldcat provides a default <code>user-agent</code> value in headers of all requests to OCLC web services: <code>bookops-worldcat/{version}</code>. It is encouraged to update the <code>user-agent</code> value to properly identify your application to OCLC servers. This will provide a useful piece of information for OCLC staff if they need to assist with troubleshooting problems that may arise.
To set a custom "user-agent" in a session simply pass is as an argument when initiating the session:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span> <span class="o">=</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_client_name&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>... or simply update its headers attribute:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;user-agent&quot;</span><span class="p">:</span> <span class="s2">&quot;my-app/version 1.0&quot;</span><span class="p">})</span>
</code></pre></div></p>
<p>The <code>user-agent</code> header can be set for an access token request as well. To do that simply pass it as the <code>agent</code> parameter when initiating <code>WorldcatAccessToken</code> object:
<div class="language-python highlight"><pre><span></span><code><span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="o">=</span><span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
    <span class="n">principlal_idns</span><span class="o">=</span><span class="s2">&quot;my_principal_idns&quot;</span><span class="p">,</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_app/1.0.0&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Event hooks</strong></p>
<p><code>MetadataSession</code> methods support <a href="https://requests.readthedocs.io/en/latest/user/advanced/#event-hooks">Requests event hooks</a> which can be passed as an argument:</p>
<div class="language-python highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">print_url</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

<span class="n">hooks</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">print_url</span><span class="p">}</span>
<span class="n">session</span><span class="o">.</span><span class="n">get_brief_bib</span><span class="p">(</span><span class="mi">850939579</span><span class="p">,</span> <span class="n">hooks</span><span class="o">=</span><span class="n">hooks</span><span class="p">)</span>
</code></pre></div>
<h4 id="worldcataccesstoken">WorldcatAccessToken</h4>
<p>Bookops-Worldcat utilizes OAuth 2.0 and Client Credential Grant flow to acquire Access Token. Please note, your OCLC credentials must allow access to the Metadata API in their scope to be permitted to make requests to the web service.</p>
<p>Obtaining:
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">WorldcatAccessToken</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="o">=</span><span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
    <span class="n">principlal_idns</span><span class="o">=</span><span class="s2">&quot;my_principal_idns&quot;</span><span class="p">,</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_app/version 1.0&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<p>Token object retains underlying Requests object functionality (<code>requests.Request</code>) that can be accessed via the <code>.server_response</code> attribute:</p>
<p><div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="mi">200</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">elapsed</span><span class="p">):</span>
<span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.650108</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;user-agent&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bookops-worldcat/0.1.0&quot;</span><span class="p">,</span>
<span class="nt">&quot;Accept-Encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gzip, deflate&quot;</span><span class="p">,</span>
<span class="nt">&quot;Accept&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
<span class="nt">&quot;Connection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
<span class="nt">&quot;Content-Length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;67&quot;</span><span class="p">,</span>
<span class="nt">&quot;Content-Type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
<span class="nt">&quot;Authorization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Basic encoded_authorization_here=&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Checking if the token has expired can be done by calling the <code>is_expired</code> method:
<div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">is_expired</span><span class="p">())</span>
<span class="kc">True</span>
</code></pre></div></p>
<p>A failed token request raises <code>WorldcatAuthorizationError</code> which provides a returned by the server error code and detailed message.</p>
<h4 id="metadatasession">MetadataSession</h4>
<p>A wrapper around WorldCat Metadata API. <code>MetadataSession</code> inherits <code>requests.Session</code> methods.
Returned full bibliographic records are by default in MARC/XML format, but it is possible to receive OCLC's native CDF XML and the CDF translation into JSON serializations by supplying appropriate values in the <code>response_format</code> argument to the <code>get_full_bib</code> method. Search endpoints of the Metadata API return responses serialized into JSON format only.
All <code>MetadataSession</code> issued requests have a build-in access token auto-refresh feature. While a session is open, before any request is sent, a current token is checked for expiration and if needed a new access token is automatically obtained. </p>
<p><strong>OCLC numbers in methods' arguments</strong></p>
<p><code>MetadataSession</code> accepts OCLC numbers in methods' arguments as integers or strings with or without a prefix ("ocm", "ocn", "on"). The following are all acceptable:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">get_brief_bib</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="s2">&quot;ocm00012345&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">get_brief_bib</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="s2">&quot;00012345&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">get_brief_bib</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="mi">12345</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">search_current_control_numbers</span><span class="p">(</span><span class="n">oclcNumbers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ocm00012345&quot;</span><span class="p">,</span> <span class="s2">&quot;00012346&quot;</span><span class="p">,</span> <span class="mi">12347</span><span class="p">])</span>
</code></pre></div></p>
<h5 id="search-functionality">Search Functionality</h5>
<p>MetadataSession supports the following search functionality:</p>
<ul>
<li><code>get_brief_bib</code> retrieves a specific brief bibliographic resource</li>
<li><code>search_brief_bib_other_editions</code> retrieves other editions related to a bibliographic resource specified with an OCLC #</li>
<li><code>search_brief_bibs</code> retrieves brief resouces for a keyword or a fielded query</li>
<li><code>search_current_control_numbers</code> retrieves current OCLC control numbers</li>
<li><code>search_general_holdings</code> retrieves a summary of holdings for a specified item</li>
<li><code>search_shared_print_holdings</code> finds member library holdings with a commitment to retain (Shared Print)</li>
</ul>
<p>The server responses are returned in JSON format by default.</p>
<p><strong>Obtaining brief record</strong></p>
<p><div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_brief_bib</span><span class="p">(</span><span class="mi">850940548</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;oclcNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;850940548&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Record Builder Added This Test Record On 06/26/2013 13:07:06.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OCLC RecordBuilder.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eng&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;generalFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Book&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;specificFormat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PrintBook&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;catalogingInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;catalogingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OCPSB&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transcribingAgency&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OCPSB&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Quering WorldCat</strong></p>
<p>Metadata API provides quite robust methods to query WorldCat. In addition to a flexible query string that supports keyword and fielded searches, it is possibile to set further limits using various elements such as type of item, language, publishing date, etc. It is possible to specify the order of returned records by using the <code>orderBy</code> argument. Results are returned as brief records in JSON format.</p>
<p>The query syntax is case-insensitive and allows keyword and phrase search (use quotation marks), boolean operators (AND, OR, NOT), wildcards (# - single character, ? - any number of additional characters), and truncation (use * character).</p>
<p>keyword search with item type, language, and publishing date limiters:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">search_brief_bibs</span><span class="p">(</span>
    <span class="n">q</span><span class="o">=</span><span class="s2">&quot;czarne oceany dukaj&quot;</span><span class="p">,</span>
    <span class="n">itemType</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">,</span>
    <span class="n">inLanguage</span><span class="o">=</span><span class="s2">&quot;pol&quot;</span><span class="p">,</span>
    <span class="n">datePublished</span><span class="o">=</span><span class="s2">&quot;2015-2020&quot;</span>
    <span class="n">orderBy</span><span class="o">=</span><span class="s2">&quot;publicationDateDesc&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<p>fielded query:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">search_brief_bibs</span><span class="p">(</span>
    <span class="n">q</span><span class="o">=</span><span class="s1">&#39;ti=&quot;czarne oceany&quot; AND au:jacek dukaj AND ge=&quot;science fiction&quot;&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p>More about the query syntax can be found in <a href="https://www.oclc.org/developer/develop/worldshare-platform/architecture/query-syntax.en.html">OCLC documentation</a></p>
<h5 id="obtaining-full-bibliographic-records">Obtaining Full Bibliographic Records</h5>
<p><code>session.get_full_bib()</code> method with OCLC number as an argument sends a request for a matching full bibliographic record in WorldCat. The Metadata API correctly matches requested OCLC numbers of records that have been merged together by returning the current master record. By default <code>get_full_bib</code> returns records in MARC XML format.</p>
<p>Returned response is a <code>requests.Response</code> object with all its features:
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_full_bib</span><span class="p">(</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="mi">200</span>
<span class="s2">&quot;https://worldcat.org/bib/data/00000000123&quot;</span>
</code></pre></div>
To avoid any <code>UnicodeEncodeError</code> it is recommended to access retrieved data with <code>.content</code> attribute of the response object:
<div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></p>
<h5 id="retrieving-current-oclc-number">Retrieving Current OCLC Number</h5>
<p><code>MetadataSession.search_current_control_numbers</code> method allows retrieval of a current control number of the master record in WorldCat. Occasionally, records identified as duplicates in WorldCat have been merged.  In that case a local control number may not correctly refer to an OCLC master record. Returned responses are in JSON format by default, but it's possible to pass <code>'application/atom+xml'</code> in the <code>response_format</code> argument to have the response serialized into xml.</p>
<p><code>search_current_control_numbers</code> method accepts control numbers as a list or a comma separated string:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">search_current_control_numbers</span><span class="p">(</span><span class="n">oclcNumbers</span><span class="o">=</span><span class="s2">&quot;00012345,00012346,00012347&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">search_current_control_numbers</span><span class="p">(</span><span class="n">oclcNumbers</span><span class="o">=</span><span class="p">[</span><span class="mi">12345</span><span class="p">,</span> <span class="mi">12346</span><span class="p">,</span> <span class="mi">12347</span><span class="p">],</span> <span class="n">response_format</span><span class="o">=</span><span class="s2">&quot;application/atom+xml&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h5 id="holdings">Holdings</h5>
<p><code>MetadataSession</code> supports the following holdings operations:</p>
<ul>
<li><code>holding_get_status</code> retrieves holding status of a requested record</li>
<li><code>holding_set</code> sets holding on an individual bibliographic record</li>
<li><code>holding_unset</code> deletes holding on an individual bibliographic record</li>
<li><code>holdings_set</code> allows holdings to be set on multiple records, and is not limited by OCLC's 50 bib record limit</li>
<li><code>holdings_unset</code> allows holdings to be deleted on multiple records, and is not limited to OCLC's 50 bib record restriction</li>
</ul>
<p>By default, responses are returned in <code>atom+json</code> format, but <code>atom+xml</code> can be specified:
<div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holding_get_status</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="s2">&quot;ocn123456789&quot;</span><span class="p">,</span> <span class="n">response_format</span><span class="o">=</span><span class="s2">&quot;application/atom+xml&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;entry</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;title</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span>1143317889<span class="nt">&lt;/title&gt;</span>
<span class="w">  </span><span class="nt">&lt;updated&gt;</span>2020-04-25T05:21:10.233Z<span class="nt">&lt;/updated&gt;</span>
<span class="w">  </span><span class="nt">&lt;content</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;holdings</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://worldcat.org/metadata-api-service&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;requestedOclcNumber&gt;</span>1143317889<span class="nt">&lt;/requestedOclcNumber&gt;</span>
<span class="w">      </span><span class="nt">&lt;currentOclcNumber&gt;</span>1143317889<span class="nt">&lt;/currentOclcNumber&gt;</span>
<span class="w">      </span><span class="nt">&lt;institution&gt;</span>NYP<span class="nt">&lt;/institution&gt;</span>
<span class="w">      </span><span class="nt">&lt;holdingCurrentlySet&gt;</span>true<span class="nt">&lt;/holdingCurrentlySet&gt;</span>
<span class="w">      </span><span class="nt">&lt;id&gt;</span>http://worldcat.org/oclc/1143317889<span class="nt">&lt;/id&gt;</span>
<span class="w">    </span><span class="nt">&lt;/holdings&gt;</span>
<span class="w">  </span><span class="nt">&lt;/content&gt;</span>
<span class="nt">&lt;/entry&gt;</span>
</code></pre></div></p>
<p>Pass OCLC record numbers for batch operations as a list of strings or integers or comma separated string with or without a prefix:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">holdings_set</span><span class="p">(</span>
    <span class="n">oclcNumbers</span><span class="o">=</span><span class="s2">&quot;00000000123,00000000124,00000000125,00000000126&quot;</span><span class="p">)</span>

<span class="n">session</span><span class="o">.</span><span class="n">holdings_unset</span><span class="p">(</span><span class="n">oclcNumbers</span><span class="o">=</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">126</span><span class="p">])</span>
</code></pre></div>
The OCLC web service limits the number of records in a batch operation to 50, but <code>MetadataSession</code> permits larger batches by splitting the batch into chunks of 50 and automatically issuing multiple requests. The return object is a list of returned from server responses.</p>
<div class="language-python highlight"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holdings_unset</span><span class="p">(</span><span class="n">oclcNumbers</span><span class="o">=</span><span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">126</span><span class="p">])</span>

<span class="c1"># print results of each batch of 50s</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<h2 id="examples">Examples</h2>
<p>Complex search query:
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">WorldcatAccessToken</span><span class="p">,</span> <span class="n">MetadataSession</span>

<span class="c1"># obtain access token</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
    <span class="n">principal_id</span><span class="o">=</span><span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
    <span class="n">principal_idns</span><span class="o">=</span><span class="s2">&quot;my_principal_idns&quot;</span><span class="p">,</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_app/version 1.0&quot;</span>
<span class="p">)</span>


<span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">authorization</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>

    <span class="c1"># search Worlcat</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">search_brief_bibs</span><span class="p">(</span>
        <span class="n">q</span><span class="o">=</span><span class="s2">&quot;su:civil war AND (su:antietam OR su:sharpsburg)&quot;</span><span class="p">,</span>
        <span class="n">datePublished</span><span class="o">=</span><span class="s2">&quot;2000-2020&quot;</span><span class="p">,</span>
        <span class="n">inLanguage</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">,</span>
        <span class="n">inCatalogLanguage</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">,</span>
        <span class="n">catalogSource</span><span class="o">=</span><span class="s2">&quot;dlc&quot;</span><span class="p">,</span>
        <span class="n">itemType</span><span class="o">=</span><span class="s2">&quot;book&quot;</span><span class="p">,</span>
        <span class="n">itemSubType</span><span class="o">=</span><span class="s2">&quot;digital&quot;</span><span class="p">,</span>
        <span class="n">orderBy</span><span class="o">=</span><span class="s2">&quot;mostWidelyHeld&quot;</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">first_bib</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;briefRecords&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">first_bib_number</span> <span class="o">=</span> <span class="n">first_bib</span><span class="p">[</span><span class="s2">&quot;oclcNumber&quot;</span><span class="p">]</span>

    <span class="c1"># get full bib</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_full_bib</span><span class="p">(</span><span class="n">oclcNumber</span><span class="o">=</span><span class="n">first_bib_number</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="about/" class="md-footer__link md-footer__link--next" aria-label="Next: About BookOps">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                About BookOps
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.tabs.link", "content.code.copy", "content.code.annotate", "navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "navigation.sections", "navigation.expand"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>