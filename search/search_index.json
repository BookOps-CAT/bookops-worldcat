{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"BookOps-Worldcat Overview Requires Python 3.7 and up. Bookops-Worldcat is a Python wrapper around OCLC's Worldcat Search and Metadata APIs. Bookops-Worldcat simplifies some of the OCLC's APIs boilerplate and hopefully lowers a threshold to access and utilize these web services by cataloging departments that may not have sufficient programming support. Python language with it's gentle learning curve seems a perfect vehicle to facilite this goal further. This package takes advantage of functionality of a popular Requests library . Interaction with OCLC's services is build around Requests' sessions. Authorizing a session requires simply passing OCLC's WSkey (SearchSession) or an access token (MetadataSession). Opening a session allows to call its specifc methods that facilitate communication between your script/client and a particular endpoint of OCLC's service. Much of the hurdles related to making valid requests hides under the hood of this package making it as simple as possible. Please note, not all functionalities of Worldcat Search and Metadata APIs are implemented because this tool was primarily build for our organization's specific needs. We are open though to any collaboration to expand and improve the package. Supported OCLC web services: The wrapper supports at the moment only OAuth 2.0 endpoints and flows, specifically it uses Client Credential Grant and Access Token. WorldCat Search API provides developer-level access to WorldCat for bibliographic, holdings and location data. It requires credentials (WSkey only) that can be obtain from OCLC. It allows searching and retrieving bibliographic records for books, videos, music, etc. BookOps wrapper offers following operations: SRU (query in a form of a CQL Search) Read (retrieves a single bibliographic record by OCLC number) Lookup By ISBN Lookup By ISSN Lookup By Standard Number Worldcat Metadata API is a read-write service for WorldCat. It allows to add and update records in WorldCat, mantain holdings, and work with local bibliographic data. Metadata API requires OCLC credentials. BookOps wrapper focuses on following API operations: Bibliographic Resource Read (retrieves a single bibliographic record by OCLC number) Holdings Resource Set/Create (to update holdings) Unset/Delete (to delete holdings) Retrieve Status (to retrieve holdings status) Batch Set - Multiple OCLC Numbers Batch Unset - Multiple OCLC Numbers Installation To install use pip: $ pip install bookops-worldcat Quickstart SearchSession (Search API) WorldCat Search API requires OCLC's WSkey. See OCLC authentication docs for more information how to obtain it. Returned records are by default in MARC XML format. Other formats offered by the API are not currently supported. The SearchSession offers following methods to query WorldCat: simple lookups return a single, matching record with highest holdings count in WorldCat: lookup_isbn perorms ISBN search lookup_issn performs ISSN search lookup_oclc_number performs OCLC number search lookup_standard_number performs standard number query advanced query sru_query that utilize OCLC various indexes, filters, and sortings Lookups basic usage: >>> from bookops_worldcat import SearchSession >>> session = SearchSession(credentials=\"your WSkey\") >>> results = session.lookup_oclc_number(\"00000000123\") >>> print(results.status_code) 200 Using context manager: with SearchSession(credentials=\"your WSkey\") as session: results = session.lookup_isbn(isbn=\"9781680502404\", service_level='full') Advanced searches sru_query offers a flexible way to build a complex query that get translated into SRU/CQL syntax that is accepted by the web service. sru_query query attribute syntax supports Boolean operators: & - AND <> - NOT | - OR Use parenthesis to encapsulate logic statements. Advanced CQL query example (keyword search for \"civil war\" with subject \"antietam\" or \"sharpsburg\", results sorted by date from most recent one): with SearchSession(credentials=\"your WSkey\") as session: results = session.sru_query( query='srw.kw=\"civil war\"&(srw.su=\"antietam\"|srw.su=\"sharpsburg\")', maximum_records=50, sort_keys=[(\"date\", \"descending\")], service_level=\"full\") WorldcatAccessToken WorldCat Metadata API requires an access token for authorization. This library utilizes OAuth 2.0 and Client Credential Grant flow to aquire it. Any requests during the MetadataSession are authenticated using this access token. Basic usage: from bookops_worldcat import WorldcatAccessToken token = WorldcatAccessToken( oauth_server=\"https://oauth.oclc.org\", key=\"your_WSKey\", secret=\"your_secret\", options={ \"scope\": [\"WorldCatMetadataAPI\"], \"principal_id\": \"your_principal_id\", \"principlal_idns\": \"your_principal_idns\" } ) print(token.token_str) \"tk_Yebz4BpEp9dAsghA7KpWx6dYD1OZKWBlHjqW\" print(token.is_expired()) False Token object retains underlying Requests object functionality ( requests.Request ) that can be accessed via .server_response attribute: print(token.server_response.status_code) 200 print(token.server_response.elapsed): 0:00:00.650108 print(token.server_response.json()) { \"user-agent\": \"bookops-worldcat/0.1.0\", \"Accept-Encoding\": \"gzip, deflate\", \"Accept\": \"application/json\", \"Connection\": \"keep-alive\", \"Content-Length\": \"67\", \"Content-Type\": \"application/x-www-form-urlencoded\", \"Authorization\": \"Basic encoded_authorization_here=\" } MetadataSession (Metadata API) A wrapper around WorldCat Metadata API. MetadataSession inherits requests.Session methods. The session is authorized using WorldcatAccessToken object. Returned bibliographic records are by default in MARC/XML format (OCLC's native CDF XML and the CDF translation into JSON serializations are not supported at the moment). Basic usage: from bookops_worldcat import MetadataSession with MetadataSession(credentials=token) as session: results = session.get_record(\"00000000123\") Returned response is a requests.Response object with all its features: print(results.status_code) 200 print(results.url) \"https://worldcat.org/bib/data/00000000123\" print(results.text) <?xml version=\"1.0\" encoding=\"UTF-8\"?> <entry xmlns=\"http://www.w3.org/2005/Atom\"> <content type=\"application/xml\"> <response xmlns=\"http://worldcat.org/rb\" mimeType=\"application/vnd.oclc.marc21+xml\"> <record xmlns=\"http://www.loc.gov/MARC21/slim\"> <leader>00000cam a2200000Ia 4500</leader> <controlfield tag=\"001\">ocn850939579</controlfield> ... <datafield tag=\"100\" ind1=\"0\" ind2=\" \"> <subfield code=\"a\">OCLC RecordBuilder.</subfield> </datafield> <datafield tag=\"245\" ind1=\"1\" ind2=\"0\"> <subfield code=\"a\">Record Builder Added This Test Record On 06/26/2013 13:06:22.</subfield> ... <datafield tag=\"500\" ind1=\" \" ind2=\" \"> <subfield code=\"a\">TEST RECORD -- DO NOT USE.</subfield> </datafield> </record> </response> </content> <id>http://worldcat.org/oclc/850939579</id> <link href=\"http://worldcat.org/oclc/850939579\"></link> </entry> To avoid any UnicodeEncodeError it is recommended to access retrieved data with .content attribute of the response object: print(response.content) MetadataSession supports also various holdings operations: holdings_get_status retrieves holding status of requested record holdings_set sets holdings on an individual bibliographic record holdings_unset deletes holdings on an individual bibliographic record holdings_set_batch allows to set holdings on multiple records; it is not limited by OCLC 50 bibs limit) holdings_unset_batch allows to delete holdings on multiple records and is not limited to OCLC's 50 records restriction example: result = session.holdings_set(oclc_number=\"00000000123\") print(result) <Response [201]> by default responses are returned in atom+json format, but atom+xml can be specified: result = session.holdings_get_status(\"1143317889\", response_format=\"xml\") print(result) <?xml version=\"1.0\" encoding=\"UTF-8\"?> <entry xmlns=\"http://www.w3.org/2005/Atom\"> <title type=\"text\">1143317889</title> <updated>2020-04-25T05:21:10.233Z</updated> <content type=\"application/xml\"> <holdings xmlns=\"http://worldcat.org/metadata-api-service\"> <requestedOclcNumber>1143317889</requestedOclcNumber> <currentOclcNumber>1143317889</currentOclcNumber> <institution>NYP</institution> <holdingCurrentlySet>true</holdingCurrentlySet> <id>http://worldcat.org/oclc/1143317889</id> </holdings> </content> </entry> pass OCLC record numbers for batch operations as a list of strings: session.holdings_unset_batch( oclc_numbers=[ \"00000000123\", \"00000000124\", \"00000000125\", \"00000000126\" ] ) MetadataSession requests support Requests event hooks that can be passes as an argument: def print_url(response, *args, **kwargs): print(response.url) hooks = {'response': print_url} session.get_record(\"00000000123\", hooks=hooks) \"https://worldcat.org/bib/data/00000000123\"","title":"Home"},{"location":"#bookops-worldcat","text":"","title":"BookOps-Worldcat"},{"location":"#overview","text":"Requires Python 3.7 and up. Bookops-Worldcat is a Python wrapper around OCLC's Worldcat Search and Metadata APIs. Bookops-Worldcat simplifies some of the OCLC's APIs boilerplate and hopefully lowers a threshold to access and utilize these web services by cataloging departments that may not have sufficient programming support. Python language with it's gentle learning curve seems a perfect vehicle to facilite this goal further. This package takes advantage of functionality of a popular Requests library . Interaction with OCLC's services is build around Requests' sessions. Authorizing a session requires simply passing OCLC's WSkey (SearchSession) or an access token (MetadataSession). Opening a session allows to call its specifc methods that facilitate communication between your script/client and a particular endpoint of OCLC's service. Much of the hurdles related to making valid requests hides under the hood of this package making it as simple as possible. Please note, not all functionalities of Worldcat Search and Metadata APIs are implemented because this tool was primarily build for our organization's specific needs. We are open though to any collaboration to expand and improve the package. Supported OCLC web services: The wrapper supports at the moment only OAuth 2.0 endpoints and flows, specifically it uses Client Credential Grant and Access Token. WorldCat Search API provides developer-level access to WorldCat for bibliographic, holdings and location data. It requires credentials (WSkey only) that can be obtain from OCLC. It allows searching and retrieving bibliographic records for books, videos, music, etc. BookOps wrapper offers following operations: SRU (query in a form of a CQL Search) Read (retrieves a single bibliographic record by OCLC number) Lookup By ISBN Lookup By ISSN Lookup By Standard Number Worldcat Metadata API is a read-write service for WorldCat. It allows to add and update records in WorldCat, mantain holdings, and work with local bibliographic data. Metadata API requires OCLC credentials. BookOps wrapper focuses on following API operations: Bibliographic Resource Read (retrieves a single bibliographic record by OCLC number) Holdings Resource Set/Create (to update holdings) Unset/Delete (to delete holdings) Retrieve Status (to retrieve holdings status) Batch Set - Multiple OCLC Numbers Batch Unset - Multiple OCLC Numbers","title":"Overview"},{"location":"#installation","text":"To install use pip: $ pip install bookops-worldcat","title":"Installation"},{"location":"#quickstart","text":"","title":"Quickstart"},{"location":"#searchsession-search-api","text":"WorldCat Search API requires OCLC's WSkey. See OCLC authentication docs for more information how to obtain it. Returned records are by default in MARC XML format. Other formats offered by the API are not currently supported. The SearchSession offers following methods to query WorldCat: simple lookups return a single, matching record with highest holdings count in WorldCat: lookup_isbn perorms ISBN search lookup_issn performs ISSN search lookup_oclc_number performs OCLC number search lookup_standard_number performs standard number query advanced query sru_query that utilize OCLC various indexes, filters, and sortings Lookups basic usage: >>> from bookops_worldcat import SearchSession >>> session = SearchSession(credentials=\"your WSkey\") >>> results = session.lookup_oclc_number(\"00000000123\") >>> print(results.status_code) 200 Using context manager: with SearchSession(credentials=\"your WSkey\") as session: results = session.lookup_isbn(isbn=\"9781680502404\", service_level='full') Advanced searches sru_query offers a flexible way to build a complex query that get translated into SRU/CQL syntax that is accepted by the web service. sru_query query attribute syntax supports Boolean operators: & - AND <> - NOT | - OR Use parenthesis to encapsulate logic statements. Advanced CQL query example (keyword search for \"civil war\" with subject \"antietam\" or \"sharpsburg\", results sorted by date from most recent one): with SearchSession(credentials=\"your WSkey\") as session: results = session.sru_query( query='srw.kw=\"civil war\"&(srw.su=\"antietam\"|srw.su=\"sharpsburg\")', maximum_records=50, sort_keys=[(\"date\", \"descending\")], service_level=\"full\")","title":"SearchSession (Search API)"},{"location":"#worldcataccesstoken","text":"WorldCat Metadata API requires an access token for authorization. This library utilizes OAuth 2.0 and Client Credential Grant flow to aquire it. Any requests during the MetadataSession are authenticated using this access token. Basic usage: from bookops_worldcat import WorldcatAccessToken token = WorldcatAccessToken( oauth_server=\"https://oauth.oclc.org\", key=\"your_WSKey\", secret=\"your_secret\", options={ \"scope\": [\"WorldCatMetadataAPI\"], \"principal_id\": \"your_principal_id\", \"principlal_idns\": \"your_principal_idns\" } ) print(token.token_str) \"tk_Yebz4BpEp9dAsghA7KpWx6dYD1OZKWBlHjqW\" print(token.is_expired()) False Token object retains underlying Requests object functionality ( requests.Request ) that can be accessed via .server_response attribute: print(token.server_response.status_code) 200 print(token.server_response.elapsed): 0:00:00.650108 print(token.server_response.json()) { \"user-agent\": \"bookops-worldcat/0.1.0\", \"Accept-Encoding\": \"gzip, deflate\", \"Accept\": \"application/json\", \"Connection\": \"keep-alive\", \"Content-Length\": \"67\", \"Content-Type\": \"application/x-www-form-urlencoded\", \"Authorization\": \"Basic encoded_authorization_here=\" }","title":"WorldcatAccessToken"},{"location":"#metadatasession-metadata-api","text":"A wrapper around WorldCat Metadata API. MetadataSession inherits requests.Session methods. The session is authorized using WorldcatAccessToken object. Returned bibliographic records are by default in MARC/XML format (OCLC's native CDF XML and the CDF translation into JSON serializations are not supported at the moment). Basic usage: from bookops_worldcat import MetadataSession with MetadataSession(credentials=token) as session: results = session.get_record(\"00000000123\") Returned response is a requests.Response object with all its features: print(results.status_code) 200 print(results.url) \"https://worldcat.org/bib/data/00000000123\" print(results.text) <?xml version=\"1.0\" encoding=\"UTF-8\"?> <entry xmlns=\"http://www.w3.org/2005/Atom\"> <content type=\"application/xml\"> <response xmlns=\"http://worldcat.org/rb\" mimeType=\"application/vnd.oclc.marc21+xml\"> <record xmlns=\"http://www.loc.gov/MARC21/slim\"> <leader>00000cam a2200000Ia 4500</leader> <controlfield tag=\"001\">ocn850939579</controlfield> ... <datafield tag=\"100\" ind1=\"0\" ind2=\" \"> <subfield code=\"a\">OCLC RecordBuilder.</subfield> </datafield> <datafield tag=\"245\" ind1=\"1\" ind2=\"0\"> <subfield code=\"a\">Record Builder Added This Test Record On 06/26/2013 13:06:22.</subfield> ... <datafield tag=\"500\" ind1=\" \" ind2=\" \"> <subfield code=\"a\">TEST RECORD -- DO NOT USE.</subfield> </datafield> </record> </response> </content> <id>http://worldcat.org/oclc/850939579</id> <link href=\"http://worldcat.org/oclc/850939579\"></link> </entry> To avoid any UnicodeEncodeError it is recommended to access retrieved data with .content attribute of the response object: print(response.content) MetadataSession supports also various holdings operations: holdings_get_status retrieves holding status of requested record holdings_set sets holdings on an individual bibliographic record holdings_unset deletes holdings on an individual bibliographic record holdings_set_batch allows to set holdings on multiple records; it is not limited by OCLC 50 bibs limit) holdings_unset_batch allows to delete holdings on multiple records and is not limited to OCLC's 50 records restriction example: result = session.holdings_set(oclc_number=\"00000000123\") print(result) <Response [201]> by default responses are returned in atom+json format, but atom+xml can be specified: result = session.holdings_get_status(\"1143317889\", response_format=\"xml\") print(result) <?xml version=\"1.0\" encoding=\"UTF-8\"?> <entry xmlns=\"http://www.w3.org/2005/Atom\"> <title type=\"text\">1143317889</title> <updated>2020-04-25T05:21:10.233Z</updated> <content type=\"application/xml\"> <holdings xmlns=\"http://worldcat.org/metadata-api-service\"> <requestedOclcNumber>1143317889</requestedOclcNumber> <currentOclcNumber>1143317889</currentOclcNumber> <institution>NYP</institution> <holdingCurrentlySet>true</holdingCurrentlySet> <id>http://worldcat.org/oclc/1143317889</id> </holdings> </content> </entry> pass OCLC record numbers for batch operations as a list of strings: session.holdings_unset_batch( oclc_numbers=[ \"00000000123\", \"00000000124\", \"00000000125\", \"00000000126\" ] ) MetadataSession requests support Requests event hooks that can be passes as an argument: def print_url(response, *args, **kwargs): print(response.url) hooks = {'response': print_url} session.get_record(\"00000000123\", hooks=hooks) \"https://worldcat.org/bib/data/00000000123\"","title":"MetadataSession (Metadata API)"},{"location":"about/","text":"BookOps BookOps is a fully consolidated, shared library technical services organization that serves the Brooklyn Public Library (BPL) and the New York Public Library (NYPL). BookOps-Worldcat was glued together by Tomasz Kalata","title":"About"},{"location":"about/#bookops","text":"BookOps is a fully consolidated, shared library technical services organization that serves the Brooklyn Public Library (BPL) and the New York Public Library (NYPL). BookOps-Worldcat was glued together by Tomasz Kalata","title":"BookOps"},{"location":"changelog/","text":"Change Log","title":"Changelog"},{"location":"changelog/#change-log","text":"","title":"Change Log"}]}