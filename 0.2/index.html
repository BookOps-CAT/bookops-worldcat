
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of BookOps-Worldcat library">
      
      
      
        <link rel="canonical" href="https://bookops-cat.github.io/bookops-worldcat/0.2/">
      
      
      
        <link rel="next" href="about/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>Overview - BookOps-Worldcat Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="NYPL" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bookops-worldcat" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="BookOps-Worldcat Documentation" class="md-header__button md-logo" aria-label="BookOps-Worldcat Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BookOps-Worldcat Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BookOps-CAT/bookops-worldcat" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bookops-worldcat
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="." class="md-tabs__link">
          
  
  BookOps-WorldCat

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="api/authorize.md" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="tutorials.md" class="md-tabs__link">
        
  
    
  
  Tutorials

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="BookOps-Worldcat Documentation" class="md-nav__button md-logo" aria-label="BookOps-Worldcat Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    BookOps-Worldcat Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BookOps-CAT/bookops-worldcat" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bookops-worldcat
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    BookOps-WorldCat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            BookOps-WorldCat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searching-worldcat" class="md-nav__link">
    <span class="md-ellipsis">
      Searching Worldcat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Access Token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-records" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searchsession-search-api" class="md-nav__link">
    <span class="md-ellipsis">
      SearchSession (Search API)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SearchSession (Search API)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-lookup" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Lookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-queries" class="md-nav__link">
    <span class="md-ellipsis">
      Complex queries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worldcataccesstoken" class="md-nav__link">
    <span class="md-ellipsis">
      WorldcatAccessToken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadatasession" class="md-nav__link">
    <span class="md-ellipsis">
      MetadataSession
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetadataSession">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_record-method" class="md-nav__link">
    <span class="md-ellipsis">
      get_record Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    How To
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            How To
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="start.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="search.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search WorldCat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="manage_bibs.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manage Bibliographic Records
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="manage_holdings.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manage Institution Holdings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="local.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search and Manage Local Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="advanced.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Usage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About BookOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contributing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    bookops_worldcat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            bookops_worldcat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/authorize.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.authorize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/errors.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/metadata_api.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.metadata_api
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/query.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="api/utils.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bookops_worldcat.utils
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searching-worldcat" class="md-nav__link">
    <span class="md-ellipsis">
      Searching Worldcat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining Access Token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-records" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searchsession-search-api" class="md-nav__link">
    <span class="md-ellipsis">
      SearchSession (Search API)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SearchSession (Search API)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-lookup" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Lookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-queries" class="md-nav__link">
    <span class="md-ellipsis">
      Complex queries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worldcataccesstoken" class="md-nav__link">
    <span class="md-ellipsis">
      WorldcatAccessToken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadatasession" class="md-nav__link">
    <span class="md-ellipsis">
      MetadataSession
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MetadataSession">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_record-method" class="md-nav__link">
    <span class="md-ellipsis">
      get_record Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdings" class="md-nav__link">
    <span class="md-ellipsis">
      Holdings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="bookops-worldcat">BookOps-Worldcat</h1>
<p><a href="https://travis-ci.com/BookOps-CAT/bookops-worldcat"><img alt="Build Status" src="https://travis-ci.com/BookOps-CAT/bookops-worldcat.svg?branch=master" /></a> <a href="https://coveralls.io/github/BookOps-CAT/bookops-worldcat?branch=master"><img alt="Coverage Status" src="https://coveralls.io/repos/github/BookOps-CAT/bookops-worldcat/badge.svg?branch=master&amp;service=github" /></a> <a href="https://badge.fury.io/py/bookops-worldcat"><img alt="PyPI version" src="https://badge.fury.io/py/bookops-worldcat.svg" /></a> <img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/bookops-worldcat" /> <a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a> <a href="https://opensource.org/licenses/MIT"><img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg" /></a></p>
<h2 id="overview">Overview</h2>
<p>Requires Python 3.7 and up.</p>
<p>Bookops-Worldcat is a Python wrapper around <a href="https://www.oclc.org/en/home.html">OCLC's</a> <a href="https://www.worldcat.org/">Worldcat</a> <a href="https://www.oclc.org/developer/develop/web-services/worldcat-search-api.en.html">Search</a> and <a href="https://www.oclc.org/developer/develop/web-services/worldcat-metadata-api.en.html">Metadata</a> APIs.  </p>
<p>The Bookops-Worldcat package simplifies some of OCLC API boilerplate, and ideally lowers the technological threshold for cataloging departments that may not have sufficient programming support to access and utilize those web services. Python language, with it's gentle learning curve, has the potential to be a perfect vehicle towards this goal.</p>
<p>This package takes advantage of the functionality of the popular <a href="https://requests.readthedocs.io/en/master/">Requests library</a>. Interaction with OCLC's services is built around Requests sessions. Authorizing a session simply requires  passing in OCLC's WSkey (<code>SearchSession</code>) or an access token (<code>MetadataSession</code>). Opening a session allows the user to call specific methods which facilitate communication between the user's script/client and a particular endpoint of OCLC's service. Many of the hurdles related to making valid requests are hidden under the hood of this package, making it as simple as possible to access the functionalities of OCLC APIs.<br />
Please note, not all features of Worldcat Search and Metadata APIs are implemented because this tool was primarily built for our organization's specific needs. However, we are open to any collaboration to expand and improve the package.  </p>
<p><strong>Supported OCLC web services:</strong></p>
<p>At the moment, the wrapper supports only OAuth 2.0 endpoints and flows, specifically, it uses Client Credential Grant and Access Token.  </p>
<p><a href="https://www.oclc.org/developer/develop/web-services.en.html">WorldCat Search API</a> provides developer-level access to WorldCat for bibliographic, holdings and location data. It requires credentials - WSkey only. It allows searching and retrieving bibliographic records for books, videos, music, and other formats.<br />
BookOps wrapper offers following operations:  </p>
<ul>
<li>SRU (query in a form of a CQL Search)  </li>
<li>Read (retrieves a single bibliographic record by OCLC number)  </li>
<li>Lookup By ISBN</li>
<li>Lookup By ISSN  </li>
<li>Lookup By Standard Number</li>
</ul>
<p><a href="https://www.oclc.org/developer/develop/web-services/worldcat-metadata-api.en.html">Worldcat Metadata API</a> is a read-write service for WorldCat. It allows adding and updating records in WorldCat, mantaining holdings, and working with local bibliographic data. Access to Metadata API requires OCLC credentials. The BookOps wrapper focuses on the following API operations:  </p>
<ul>
<li>Bibliographic Resource  <ul>
<li>Read (retrieves a single bibliographic record by OCLC number)  </li>
</ul>
</li>
<li>Holdings Resource  <ul>
<li>Set/Create  (to update holdings)</li>
<li>Unset/Delete  (to delete holdings)</li>
<li>Retrieve Status  (to retrieve holdings status)</li>
<li>Batch Set - Multiple OCLC Numbers</li>
<li>Batch Unset - Multiple OCLC Numbers</li>
</ul>
</li>
</ul>
<h2 id="installation">Installation</h2>
<p>To install use pip:  </p>
<p><code>$ pip install bookops-worldcat</code>  </p>
<h2 id="quickstart">Quickstart</h2>
<p>Worldcat Search API and Metadata API require OCLC credentials which can be obtained at the <a href="https://www.oclc.org/developer/home.en.html">OCLC Developer Network</a> site. </p>
<h4 id="searching-worldcat">Searching Worldcat</h4>
<p>Search API requires only OCLC WSkey for authorization. Passing the WSkey string to <code>SearchSession</code> in the credentials argument will attach it to each request issued while the session is open. <code>SearchSession</code> includes several simple lookup methods allowing retrieval of a matching bibliographic record with the highest holdings.</p>
<p>Basic usage:<br />
<div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">SearchSession</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">session</span> <span class="o">=</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSkey&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">lookup_oclc_number</span><span class="p">(</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="mi">200</span>
</code></pre></div></p>
<p>Using context manager:<br />
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSkey&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">lookup_isbn</span><span class="p">(</span><span class="n">isbn</span><span class="o">=</span><span class="s2">&quot;9781680502404&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span>
<span class="nt">&lt;record</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/MARC21/slim&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;leader&gt;</span>00000cam<span class="w"> </span>a2200000<span class="w"> </span>i<span class="w"> </span>4500<span class="nt">&lt;/leader&gt;</span>
<span class="w">    </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;001&quot;</span><span class="nt">&gt;</span>1143317889<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">    </span>...
<span class="w">    </span><span class="nt">&lt;datafield</span><span class="w"> </span><span class="na">ind1=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">ind2=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;245&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;a&quot;</span><span class="nt">&gt;</span>Blueprint<span class="w"> </span>:<span class="nt">&lt;/subfield&gt;</span>
<span class="w">      </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;b&quot;</span><span class="nt">&gt;</span>the<span class="w"> </span>evolutionary<span class="w"> </span>origins<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>good<span class="w"> </span>society<span class="w"> </span>/<span class="nt">&lt;/subfield&gt;</span>
<span class="w">      </span><span class="nt">&lt;subfield</span><span class="w"> </span><span class="na">code=</span><span class="s">&quot;c&quot;</span><span class="nt">&gt;</span>Nicholas<span class="w"> </span>A.<span class="w"> </span>Christakis.<span class="nt">&lt;/subfield&gt;</span>
<span class="w">    </span><span class="nt">&lt;/datafield&gt;</span>
<span class="w">    </span>...
<span class="nt">&lt;/record&gt;</span>
</code></pre></div></p>
<p><code>SearchSession</code> allows more complex queries through <code>sru_query</code> method:</p>
<p><div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSkey&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
  <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">sru_query</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s1">&#39;srw.au+all+&quot;Asimov Isaac&quot;+and+srw.yr+exact+&quot;1990&quot;&#39;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-xml highlight"><pre><span></span><code><span class="nt">&lt;searchRetrieveResponse</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/zing/srw/&quot;</span><span class="w"> </span><span class="na">xmlns:oclcterms=</span><span class="s">&quot;http://purl.org/oclc/terms/&quot;</span><span class="w"> </span><span class="na">xmlns:dc=</span><span class="s">&quot;http://purl.org/dc/elements/1.1/&quot;</span><span class="w"> </span><span class="na">xmlns:diag=</span><span class="s">&quot;http://www.loc.gov/zing/srw/diagnostic/&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;numberOfRecords&gt;</span>782<span class="nt">&lt;/numberOfRecords&gt;</span>
<span class="nt">&lt;records&gt;</span>
<span class="nt">&lt;record&gt;</span>
<span class="nt">&lt;recordSchema&gt;</span>marcxml<span class="nt">&lt;/recordSchema&gt;</span>
<span class="nt">&lt;recordPacking&gt;</span>xml<span class="nt">&lt;/recordPacking&gt;</span>
<span class="nt">&lt;recordData&gt;</span>
<span class="nt">&lt;record</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/MARC21/slim&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;leader&gt;</span>00000cam<span class="w"> </span>a2200000<span class="w"> </span>a<span class="w"> </span>4500<span class="nt">&lt;/leader&gt;</span>
<span class="w">    </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;001&quot;</span><span class="nt">&gt;</span>21153421<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">    </span>...
<span class="w">  </span><span class="nt">&lt;/record&gt;</span>
<span class="nt">&lt;/recordData&gt;</span>
<span class="nt">&lt;/record&gt;</span>
<span class="nt">&lt;record&gt;</span>
<span class="nt">&lt;recordSchema&gt;</span>marcxml<span class="nt">&lt;/recordSchema&gt;</span>
<span class="nt">&lt;recordPacking&gt;</span>xml<span class="nt">&lt;/recordPacking&gt;</span>
<span class="nt">&lt;recordData&gt;</span>
<span class="nt">&lt;record</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/MARC21/slim&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;leader&gt;</span>00000cam<span class="w"> </span>a2200000<span class="w"> </span>a<span class="w"> </span>4500<span class="nt">&lt;/leader&gt;</span>
<span class="w">    </span><span class="nt">&lt;controlfield</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;001&quot;</span><span class="nt">&gt;</span>20561482<span class="nt">&lt;/controlfield&gt;</span>
<span class="w">    </span>...
<span class="w">  </span><span class="nt">&lt;/record&gt;</span>
<span class="nt">&lt;/recordData&gt;</span>
<span class="nt">&lt;/record&gt;</span>
<span class="nt">&lt;/records&gt;</span>
<span class="nt">&lt;nextRecordPosition&gt;</span>11<span class="nt">&lt;/nextRecordPosition&gt;</span>
<span class="nt">&lt;resultSetIdleTime/&gt;</span>
<span class="nt">&lt;echoedSearchRetrieveRequest</span><span class="w"> </span><span class="na">xmlns:srw=</span><span class="s">&quot;http://www.loc.gov/zing/srw/&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;query&gt;</span>srw.au<span class="w"> </span>all<span class="w"> </span>&quot;Asimov<span class="w"> </span>Isaac&quot;<span class="w"> </span>and<span class="w"> </span>srw.yr<span class="w"> </span>exact<span class="w"> </span>&quot;1990&quot;<span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;maximumRecords&gt;</span>10<span class="nt">&lt;/maximumRecords&gt;</span>
<span class="nt">&lt;recordPacking&gt;</span>xml<span class="nt">&lt;/recordPacking&gt;</span>
<span class="nt">&lt;startRecord&gt;</span>1<span class="nt">&lt;/startRecord&gt;</span>
<span class="nt">&lt;sortKeys&gt;</span>relevance,,0<span class="nt">&lt;/sortKeys&gt;</span>
<span class="nt">&lt;wskey&gt;</span>my_WSkey<span class="nt">&lt;/wskey&gt;</span>
<span class="nt">&lt;frbrGrouping&gt;</span>off<span class="nt">&lt;/frbrGrouping&gt;</span>
<span class="nt">&lt;servicelevel&gt;</span>default<span class="nt">&lt;/servicelevel&gt;</span>
<span class="nt">&lt;/echoedSearchRetrieveRequest&gt;</span>
<span class="nt">&lt;/searchRetrieveResponse&gt;</span>
</code></pre></div></p>
<p>For more details about syntax of queries see the <a href="https://bookops-cat.github.io/bookops-worldcat/#searchsession-search-api">Advanced Usage&gt;SessionSearch section</a>.</p>
<h4 id="obtaining-access-token">Obtaining Access Token</h4>
<p>Worldcat access token can be obtained by passing credential parameters into <code>WorldcatAccessToken</code> object.</p>
<p><div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">WorldcatAccessToken</span>

<span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">oauth_server</span><span class="o">=</span><span class="s2">&quot;https://oauth.oclc.org&quot;</span><span class="p">,</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
        <span class="s2">&quot;principal_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;principlal_idns&quot;</span><span class="p">:</span> <span class="s2">&quot;my_principal_idns&quot;</span>
    <span class="p">},</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_app/version 1.0&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">token_str</span><span class="p">)</span>
<span class="s2">&quot;tk_Yebz4BpEp9dAsghA7KpWx6dYD1OZKWBlHjqW&quot;</span>
</code></pre></div>
Note, WorldCat Metadata API requires an access token for authorization.</p>
<h4 id="getting-records">Getting Records</h4>
<p>The <code>MetadataSession</code> is authorized using <code>WorldcatAccessToken</code> object. The session allows retrieving a full bibliographic record from Worldcat by passing its OCLC number in the method's parameter:</p>
<p>Basic usage:
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">MetadataSession</span>  

<span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>or explicit:
<div class="language-python highlight"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="n">oclc_number</span><span class="o">=</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>Returned bibliographic record can be acceessed via <code>text</code> or <code>content</code> (preferable) argument: </p>
<div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="o">&lt;</span><span class="err">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="err">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2005/Atom&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">content</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;application/xml&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">response</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;http://worldcat.org/rb&quot;</span> <span class="n">mimeType</span><span class="o">=</span><span class="s2">&quot;application/vnd.oclc.marc21+xml&quot;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">record</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;http://www.loc.gov/MARC21/slim&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">leader</span><span class="o">&gt;</span><span class="mi">00000</span><span class="n">cam</span> <span class="n">a2200000Ia</span> <span class="mi">4500</span><span class="o">&lt;/</span><span class="n">leader</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">controlfield</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;001&quot;</span><span class="o">&gt;</span><span class="n">ocn850939579</span><span class="o">&lt;/</span><span class="n">controlfield</span><span class="o">&gt;</span>
        <span class="o">...</span>
        <span class="o">&lt;</span><span class="n">datafield</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">ind1</span><span class="o">=</span><span class="s2">&quot;0&quot;</span> <span class="n">ind2</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">subfield</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="o">&gt;</span><span class="n">OCLC</span> <span class="n">RecordBuilder</span><span class="o">.&lt;/</span><span class="n">subfield</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">datafield</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">datafield</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;245&quot;</span> <span class="n">ind1</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="n">ind2</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">subfield</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="o">&gt;</span><span class="n">Record</span> <span class="n">Builder</span> <span class="n">Added</span> <span class="n">This</span> <span class="n">Test</span> <span class="n">Record</span> <span class="n">On</span> <span class="mi">06</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">2013</span> <span class="mi">13</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mf">22.</span><span class="o">&lt;/</span><span class="n">subfield</span><span class="o">&gt;</span>
        <span class="o">...</span>
        <span class="o">&lt;</span><span class="n">datafield</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;500&quot;</span> <span class="n">ind1</span><span class="o">=</span><span class="s2">&quot; &quot;</span> <span class="n">ind2</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">subfield</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="o">&gt;</span><span class="n">TEST</span> <span class="n">RECORD</span> <span class="o">--</span> <span class="n">DO</span> <span class="n">NOT</span> <span class="n">USE</span><span class="o">.&lt;/</span><span class="n">subfield</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">datafield</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">record</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">response</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">content</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">worldcat</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">oclc</span><span class="o">/</span><span class="mi">850939579</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">link</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://worldcat.org/oclc/850939579&quot;</span><span class="o">&gt;&lt;/</span><span class="n">link</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
</code></pre></div>
<h4 id="updating-holdings">Updating Holdings</h4>
<p><code>MetadataSession</code> can be used to check or set/unset your library holdings on a master record in Worldcat:</p>
<p>example:<br />
<div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holdings_set</span><span class="p">(</span><span class="n">oclc_number</span><span class="o">=</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">Response</span> <span class="p">[</span><span class="mi">201</span><span class="p">]</span><span class="o">&gt;</span>
</code></pre></div></p>
<p><div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holdings_get_status</span><span class="p">(</span><span class="s2">&quot;850939579&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:{</span><span class="nt">&quot;requestedOclcNumber&quot;</span><span class="p">:</span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span><span class="nt">&quot;currentOclcNumber&quot;</span><span class="p">:</span><span class="s2">&quot;850939579&quot;</span><span class="p">,</span><span class="nt">&quot;institution&quot;</span><span class="p">:</span><span class="s2">&quot;NYP&quot;</span><span class="p">,</span><span class="nt">&quot;holdingCurrentlySet&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;http://worldcat.org/oclc/850939579&quot;</span><span class="p">},</span>
<span class="w"> </span><span class="nt">&quot;updated&quot;</span><span class="p">:</span><span class="s2">&quot;2020-04-29T05:27:22.960Z&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>For holdings operations on batches of records see <a href="https://bookops-cat.github.io/bookops-worldcat/#holdings">Advanced Usage&gt;MetadataSession&gt;Updating Holdings</a></p>
<h2 id="advanced-usage">Advanced Usage</h2>
<p><strong>Identifying your application</strong></p>
<p>BookOps-Worldcat provides a default <code>user-agent</code> value in headers of all requests to OCLC web services: <code>bookops-worldcat/{version}</code>. It is encouraged to update the <code>user-agent</code> value to properly identify your application to OCLC servers as it may be a useful piece of information for OCLC staff troubleshooting any problems. To set a custom "user-agent" in a session simply update its headers attribute:
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;user-agent&quot;</span><span class="p">:</span> <span class="s2">&quot;my-app/version 1.0&quot;</span><span class="p">})</span>
</code></pre></div></p>
<p>The <code>user-agent</code> header can be set for a access token request as well. To do that simply pass it as the <code>agent</code> parameter when initiating <code>WorldcatAccessToken</code> object:
<div class="language-python highlight"><pre><span></span><code><span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">oauth_server</span><span class="o">=</span><span class="s1">&#39;https://oauth.oclc.org&#39;</span><span class="p">,</span>
    <span class="n">key</span><span class="o">=</span><span class="s1">&#39;WSkey&#39;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s1">&#39;WSsecret&#39;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;SCOPE1&#39;</span><span class="p">,</span> <span class="s1">&#39;SCOPE2&#39;</span><span class="p">],</span>
        <span class="s2">&quot;principal_id&quot;</span><span class="p">:</span> <span class="s2">&quot;PRINCIPAL_ID_HERE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;principal_idns&quot;</span><span class="p">:</span> <span class="s2">&quot;PRINCIPAL_IDNS_HERE&quot;</span><span class="p">},</span>
    <span class="s2">&quot;agent&quot;</span><span class="p">:</span> <span class="s2">&quot;my_app/1.0.0&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<p><strong>Event hooks</strong></p>
<p><code>SearchSession</code> and <code>MetadataSession</code> methods support <a href="https://requests.readthedocs.io/en/latest/user/advanced/#event-hooks">Requests event hooks</a> which can be passes as an argument:  </p>
<div class="language-python highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">print_url</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>


<span class="n">hooks</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">print_url</span><span class="p">}</span>

<span class="n">session</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="s2">&quot;00000000123&quot;</span><span class="p">,</span> <span class="n">hooks</span><span class="o">=</span><span class="n">hooks</span><span class="p">)</span>
</code></pre></div>
<h4 id="searchsession-search-api">SearchSession (Search API)</h4>
<p>WorldCat Search API requires only OCLC's WSKey for authentication (<a href="https://www.oclc.org/developer/develop/authentication/wskey-lite.en.html">WSKey Lite pattern</a>). Returned records are by default in MARC XML format. Other formats offered by the API are not currently supported.  </p>
<h5 id="simple-lookup">Simple Lookup</h5>
<p>Lookup methods of <code>SearchSession</code> always return a single, matching record with highest holdings count in the WorldCat:  </p>
<ul>
<li><code>lookup_isbn</code> performs ISBN search</li>
<li><code>lookup_issn</code> performs ISSN search</li>
<li><code>lookup_oclc_number</code>  performs OCLC number search</li>
<li><code>lookup_standard_number</code> performs standard number query</li>
</ul>
<p>Fullness of retrieved bibliographic records can be specified by passing a <code>service_level</code> argument into each of the requests. There are two modes: "default" and "full".</p>
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">lookup_isbn</span><span class="p">(</span><span class="s2">&quot;9781680502404&quot;</span><span class="p">,</span> <span class="n">service_level</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Searches for OCLC numbers that have been merged retrieve a master record they have been merged into:
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">lookup_oclc_number</span><span class="p">(</span><span class="n">oclc_number</span><span class="o">=</span><span class="s2">&quot;969362800&quot;</span><span class="p">)</span>
</code></pre></div>
Do not use any "ocm", "ocn", or other prefixes with OCLC numbers.</p>
<h5 id="complex-queries">Complex queries</h5>
<p><code>sru_query</code> method of <code>SearchSession</code> offers a flexible way to build complex queries using SRU/CQL syntax.</p>
<p>Following OCLC's resouces can be very helpful in learning about query syntax:  </p>
<ul>
<li>http://www.worldcat.org/webservices/catalog/search/sru?wskey={my_WSKey}</li>
<li><a href="https://www.oclc.org/developer/develop/web-services/worldcat-search-api/bibliographic-resource.en.html">OCLC Search API documentation</a></li>
<li><a href="http://worldcat.org/webservices/catalog/evaluator.html">URI Evaluator</a></li>
</ul>
<p>Advanced CQL query example (keyword search for "civil war" phrase with subject "antietam" or "sharpsburg", results sorted by date from most recent one):<br />
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">SearchSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">sru_query</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="s1">&#39;srw.kw+=+&quot;civil war&quot;+and+(srw.su+=+&quot;antietam&quot;+OR+srw.su+=+&quot;sharpsburg&quot;)&#39;</span><span class="p">,</span>
        <span class="n">maximum_records</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">sort_keys</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;descending&quot;</span><span class="p">)],</span>
        <span class="n">service_level</span><span class="o">=</span><span class="s2">&quot;full&quot;</span><span class="p">)</span>
</code></pre></div>
Note, <code>sru_query</code> does not require to URL encode parenthesis in logic statements as it is in the OCLC documentation.</p>
<p>Default parameters of the <code>sru_query</code> method:  </p>
<ul>
<li><code>start_record</code> (default value: <code>1</code>): starting position of the result set (can be used to page through the large results)  </li>
<li><code>maximum_records</code> ( default: <code>10</code>):  maximum value is 100</li>
<li><code>sort_keys</code> (default: <code>[("relevance", "descending")]</code>): specifies how results are sorted; <code>sort_keys</code> must be a list of tuples, where the first tuple element is a key, and the second is a sort type. This allows to combine two or more sort types in the results, for example: <code>sort_keys=[("author", "ascending"), ("date", "descending")]</code> will return results sorted by the author in alphabetical order and within each author group results will be sorted by date from the newest to oldest; sort_keys keys:  <ul>
<li>relevance</li>
<li>title</li>
<li>author</li>
<li>date</li>
<li>library_count</li>
<li>score</li>
</ul>
</li>
<li><code>frbr_grouping</code> (default: <code>"off"</code>): options <code>"on"</code> and <code>"off"</code> turn on or off FRBR grouping</li>
<li><code>service_level</code> (default: <code>"default"</code>):  options: <code>"default"</code> or <code>"full"</code></li>
<li><code>hooks</code> (default: <code>None</code>): optional event hooks</li>
</ul>
<h4 id="worldcataccesstoken">WorldcatAccessToken</h4>
<p>Bookops-Worldcat utilizes OAuth 2.0 and Client Credential Grant flow to aquire Access Token. Please note, your OCLC credentials must allow access to Metadata API in their scope to be permitted to make requests to the web service.</p>
<p>Obtaining:
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bookops_worldcat</span> <span class="kn">import</span> <span class="n">WorldcatAccessToken</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">WorldcatAccessToken</span><span class="p">(</span>
    <span class="n">oauth_server</span><span class="o">=</span><span class="s2">&quot;https://oauth.oclc.org&quot;</span><span class="p">,</span>
    <span class="n">key</span><span class="o">=</span><span class="s2">&quot;my_WSKey&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my_secret&quot;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;WorldCatMetadataAPI&quot;</span><span class="p">],</span>
        <span class="s2">&quot;principal_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my_principal_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;principlal_idns&quot;</span><span class="p">:</span> <span class="s2">&quot;my_principal_idns&quot;</span>
    <span class="p">},</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;my_app/version 1.0&quot;</span>
<span class="p">)</span>
</code></pre></div></p>
<p>Token object retains underlying Requests object functionality (<code>requests.Request</code>) that can be accessed via <code>.server_response</code> attribute:</p>
<p><div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="mi">200</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">elapsed</span><span class="p">):</span>
<span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.650108</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">server_response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;user-agent&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bookops-worldcat/0.1.0&quot;</span><span class="p">,</span>
<span class="nt">&quot;Accept-Encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gzip, deflate&quot;</span><span class="p">,</span>
<span class="nt">&quot;Accept&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
<span class="nt">&quot;Connection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
<span class="nt">&quot;Content-Length&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;67&quot;</span><span class="p">,</span>
<span class="nt">&quot;Content-Type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
<span class="nt">&quot;Authorization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Basic encoded_authorization_here=&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Checking if token is expired can be done by calling <code>is_expired</code> method on it:
<div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">is_expired</span><span class="p">())</span>
<span class="kc">True</span>
</code></pre></div></p>
<p>A failed token request raises <code>TokenRequestError</code> which provides returned by the server error code and detailed message.</p>
<h4 id="metadatasession">MetadataSession</h4>
<p>A wrapper around WorldCat Metadata API. MetadataSession inherits <code>requests.Session</code> methods.<br />
Returned bibliographic records are by default in MARC/XML format (OCLC's native CDF XML and the CDF translation into JSON serializations are not supported at the moment).</p>
<h5 id="get_record-method">get_record Method</h5>
<p><code>session.get_record()</code> method with OCLC number as an argument sends a request for a matching full bibliographic record in Worldcat. <code>get_record</code> should be a primary method to download records from Worldcat. The Metadata API correctly matches requested OCLC numbers of records that have been merged by returning current master record.</p>
<p>Returned response is a <code>requests.Response</code> object with all its features:
<div class="language-python highlight"><pre><span></span><code><span class="k">with</span> <span class="n">MetadataSession</span><span class="p">(</span><span class="n">credentials</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="s2">&quot;00000000123&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="mi">200</span>
<span class="s2">&quot;https://worldcat.org/bib/data/00000000123&quot;</span>
</code></pre></div>
To avoid any <code>UnicodeEncodeError</code> it is recommended to access retrieved data with <code>.content</code> attribute of the response object:
<div class="language-python highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></p>
<h5 id="holdings">Holdings</h5>
<p>MetadataSession supports fallowing holdings operations:  </p>
<ul>
<li><code>holdings_get_status</code> retrieves holding status of requested record </li>
<li><code>holdings_set</code> sets holdings on an individual bibliographic record</li>
<li><code>holdings_unset</code> deletes holdings on an individual bibliographic record</li>
<li><code>holdings_set_batch</code> allows to set holdings on multiple records; it is not limited by OCLC 50 bibs limit)</li>
<li><code>holdings_unset_batch</code> allows to delete holdings on multiple records and is not limited to OCLC's 50 records restriction</li>
</ul>
<p>By default, responses are returned in <code>atom+json</code> format, but <code>atom+xml</code> can be specified:
<div class="language-python highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">holdings_get_status</span><span class="p">(</span><span class="s2">&quot;1143317889&quot;</span><span class="p">,</span> <span class="n">response_format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;entry</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;title</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span>1143317889<span class="nt">&lt;/title&gt;</span>
<span class="w">  </span><span class="nt">&lt;updated&gt;</span>2020-04-25T05:21:10.233Z<span class="nt">&lt;/updated&gt;</span>
<span class="w">  </span><span class="nt">&lt;content</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;holdings</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://worldcat.org/metadata-api-service&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;requestedOclcNumber&gt;</span>1143317889<span class="nt">&lt;/requestedOclcNumber&gt;</span>
<span class="w">      </span><span class="nt">&lt;currentOclcNumber&gt;</span>1143317889<span class="nt">&lt;/currentOclcNumber&gt;</span>
<span class="w">      </span><span class="nt">&lt;institution&gt;</span>NYP<span class="nt">&lt;/institution&gt;</span>
<span class="w">      </span><span class="nt">&lt;holdingCurrentlySet&gt;</span>true<span class="nt">&lt;/holdingCurrentlySet&gt;</span>
<span class="w">      </span><span class="nt">&lt;id&gt;</span>http://worldcat.org/oclc/1143317889<span class="nt">&lt;/id&gt;</span>
<span class="w">    </span><span class="nt">&lt;/holdings&gt;</span>
<span class="w">  </span><span class="nt">&lt;/content&gt;</span>
<span class="nt">&lt;/entry&gt;</span>
</code></pre></div></p>
<p>Pass OCLC record numbers for batch operations as a list of strings:<br />
<div class="language-python highlight"><pre><span></span><code><span class="n">session</span><span class="o">.</span><span class="n">holdings_unset_batch</span><span class="p">(</span>
    <span class="n">oclc_numbers</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;00000000123&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00000000124&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00000000125&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00000000126&quot;</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
The web service limits number of records in a batch operation to 50, but <code>MeatadataSession</code> permits larger batches by spliting them into chunks of 50 and issuing automaticaly multiple requests. The return object is a list of returned from server results.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="about/" class="md-footer__link md-footer__link--next" aria-label="Next: About BookOps">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                About BookOps
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.tabs.link", "content.code.copy", "content.code.annotate", "navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "navigation.sections", "navigation.expand"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>